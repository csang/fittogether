<script>
function filldata(that){
 var abc ='';
 if ($(that).parent().attr('class')=='arport') {
    var abcd = $('.posttext').val().split(" ").pop();  
    var abc = $('.posttext').val().replace(abcd,'');   
     $('.posttext').val( abc +' @'+ $(that).attr('data-name') + $(that).attr('data-last') + ' '); 
     var str = "<span class='hashtag'> @" + $(that).attr('data-name') + + $(that).attr('data-last') +" </span>";
     $('.posttext').parent().parent().find(".highlighter").append(str); 
      globalVariable.push({
          key:   $(that).attr('data-name') + $(that).attr('data-last'),
          value: $(that).attr('data-username')
      });
  
    $('.arport').fadeOut('slow');       
  
    var str = $('.posttext').val();
    str = str.replace(/\n/g, '<br>');
			if(!str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?#([a-zA-Z0-9]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?@([a-zA-Z0-9]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?#([\u0600-\u06FF]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?@([\u0600-\u06FF]+)/g)) {
                if(!str.match(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))#/g)) { //arabic support
					str = str.replace(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">#$2</span>');
				}else{
					str = str.replace(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">#$2</span>');
				}
				if(!str.match(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))@/g)) {				
					str = str.replace(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">@$2</span>');
				}else{
					str = str.replace(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">@$2</span>');
				}
			}
			$('.posttext').parent().parent().find(".highlighter").html(str);
		$('.posttext').focus(function(){
			$(this).val( $(this).val() + ' ')
		});
     $('.posttext').trigger('focus');	
   
 } else {
	  var abcd = $(that).parent('.arport2').parent('.add_comment').find('.comment').val().split(" ").pop();
      //abc = $(that).parent('.arport2').parent('.add_comment').find('.comment').val().replace(/(@\S+)/gi,'');            
     var abc = $(that).parent('.arport2').parent('.add_comment').find('.comment').val().replace(abcd,'');            
     $(that).parent('.arport2').parent('.add_comment').find('.comment').val( abc + ' @' + $(that).attr('data-name') + $(that).attr('data-last') + ' '); 
          var str = "<span class='hashtag'> @" + $(that).attr('data-name') +  $(that).attr('data-last') +"</span>";
     $(that).parent('.arport2').parent('.add_comment').find(".highlighter").append(str); 
      globalVariableforComment.push({
          key:   $(that).attr('data-name') + $(that).attr('data-last'),
          value: $(that).attr('data-username')
      });
    $('.arport2').fadeOut('slow');
      var str = $(that).parent('.arport2').parent('.add_comment').find('.comment').val();
    str = str.replace(/\n/g, '<br>');
			if(!str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?#([a-zA-Z0-9]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?@([a-zA-Z0-9]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?#([\u0600-\u06FF]+)/g) && !str.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?@([\u0600-\u06FF]+)/g)) {
                if(!str.match(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))#/g)) { //arabic support
					str = str.replace(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">#$2</span>');
				}else{
					str = str.replace(/#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))#(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">#$2</span>');
				}
				if(!str.match(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))@/g)) {				
					str = str.replace(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">@$2</span>');
				}else{
					str = str.replace(/@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))@(([a-zA-Z0-9]+)|([\u0600-\u06FF]+))/g,'<span class="hashtag">@$2</span>');
				}
			}
			$(that).parent('.arport2').parent('.add_comment').find('.comment').parent().parent().find(".highlighter").html(str);
			$(that).parent('.arport2').parent('.add_comment').find('.comment').focus(function(){
				console.log('xx');
				$(this).val( $(this).val() + ' ');
			});
    $(that).parent('.arport2').parent('.add_comment').find('.comment').focus();
			
  
 }
   }
 </script>  
		<% if @user.present? %>
		
			<%  @user.each do |abc| %>
			<li class="trainers" onclick="javascript:filldata(this)"  datacid="<%= Base64.encode64(abc.id.to_s) %>" data-name="<%= abc.first_name.capitalize %>" data-last="<%= abc.last_name.present? ? abc.last_name.capitalize : ''  %>" data-username="<%= '@' + Base64.encode64(abc.id.to_s) %>">
				<div class="column_header">
				<div class="imageRound">
				 <% img = useravatar(abc) %>
				  <%= image_tag(img, alt: abc.first_name[0]) %>	  			    
					  
				</div>
				<div class="name">
                                </h3><% if abc.user_type == 2 %>
				Trainer
				<% elsif abc.user_type == 3 %>	
				Gym 
				<% else %>
				User
				<% end %>
				 <%=  abc.id == @account.id ? '(me)' : '' %></h3>
				<% if false %>
					<% if abc.user_type == 3 %>
						<h4> <%= abc.account_gym.name.present? ? abc.account_gym.name : abc.first_name  %></h4>
					<% else %>
						<h4><%= abc.first_name %> <%= abc.last_name.present? ? abc.last_name : '' %></h4>
					<% end %>
				<% end %>	
					
				<h4><%= abc.first_name %> <%= abc.last_name.present? ? abc.last_name : '' %></h4>
				
                                       
                                       
				</div>
				<div class="clear"></div>
				</div>
			</li>
	<% end %>	
	<% else %>
	<p class="notification-msg"> No user found </p>	
	<% end %>		
		
