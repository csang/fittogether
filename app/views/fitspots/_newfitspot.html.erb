
 <%= form_for :fitspot ,:url =>  fitspots_create_url ,   :html => {id: "fitspot_form", onsubmit:  "return validateFitspotImageWidth()"} do |f| %>
	

<div class="pop-row">
 <%= f.label :text, 'Name*' %>
	<%= f.text_field :title, class: " form-control", maxlength: 50 %>
  </div>
<div class="pop-row">
 <%= f.label :text, 'Description' %>
	<%= f.text_area :description, class: " boxtextarea form-control", maxlength: 150 %>
  </div>
<!--
<div class="pop-row">
<label>Image <span class="small">(ideal image size : 730 X 250)</span></label>
	<%= f.file_field :fitspot_image %>
 
   <label for="fitspot_img" generated="true" class="errors fimgerror" style="display:none;">Image width must be greater than  730 pixels.</label>
  </div>
  -->
   <input class="form-control" type="hidden"  name="fitspot[group_id]" value="<%= Base64.encode64(@group.id.to_s) %>">
<div class="pop-row">
 <%= f.label :text, 'Location*' %>
	<%= f.text_field :location, id: "geocomplete" ,class: " form-control", maxlength: 150 %>
  </div>
<div class="pop-row">
 <%= f.label :text, 'When*' %>
	 <input class="form-control" type="text" readonly name="fitspot[fitspot_date]" id="datepicker">
        
  </div>
<div class="pop-row">
 <%= f.label :text, 'Time' %>
	 <input class="form-control" type="text"  name="fitspot[fitspot_time]" id="timepickernew">
	 
  </div>
<div class="pop-row">
  <input type="checkbox" name="invite"> Invite all members of group.
  </div>

      <div class="modal-footer modal-footer-btn">
       <%= f.submit  'Submit',  :name => 'submit', :class =>'btn btn-primary' %>
      </div>

<% end %> 

<script>
  window.imgVar2 = true;
  $(' #fitspot_fitspot_image').change(function() {
   
    var fr = new FileReader;
    
    fr.onload = function() {
        var img = new Image;
        
        img.onload = function() {
            if (img.width < 730 ) { 
               $('.fimgerror').show();
              window.imgVar2 = false; 
          } else {
              window.imgVar2 = true; 
               $('.fimgerror').hide();
          }
        };
        
        img.src = fr.result;
    };
    
    fr.readAsDataURL( this.files[0]);
    });
    
    function validateFitspotImageWidth() {

     if (!$('#fitspot_fitspot_image').val()) //check empty input filed
      {
        
         $('.fimgerror').hide();
         return;
      }
    
      if (window.imgVar2 == false) {       
           $('.fimgerror').show();
          return  false;
      }
   
    }
  </script>  
